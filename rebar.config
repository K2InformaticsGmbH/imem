%% -----------------------------------------------------------------------------
%%
%% rebar.config: SQL - rebar3 configuration file.
%%
%% Copyright (c) 2012-17 K2 Informatics GmbH.  All Rights Reserved.
%%
%% This file is provided to you under the Apache License,
%% Version 2.0 (the "License"); you may not use this file
%% except in compliance with the License.  You may obtain
%% a copy of the License at
%%
%%   http://www.apache.org/licenses/LICENSE-2.0
%%
%% Unless required by applicable law or agreed to in writing,
%% software distributed under the License is distributed on an
%% "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
%% KIND, either express or implied.  See the License for the
%% specific language governing permissions and limitations
%% under the License.
%%
%% -----------------------------------------------------------------------------

{cover_enabled, true}.
{cover_export_enabled, true}.
{cover_opts, [verbose]}.

{coveralls_coverdata, [
    "_build/test/cover/ct.coverdata",
    "_build/test/cover/eunit.coverdata"
]}.
{coveralls_service_name, "travis-ci"}.

{ct_opts, [
    {cover},
    {verbose}
]}.

{deps, [
    {erlscrypt, {git, "https://github.com/K2InformaticsGmbH/erlscrypt.git", {tag, "1.2.1"}}},
    {goldrush, {git, "https://github.com/K2InformaticsGmbH/goldrush.git", {tag, "0.1.9"}}},
    {jsx, {git, "https://github.com/K2InformaticsGmbH/jsx.git", {tag, "v2.8.2"}}},
    {lager, {git, "https://github.com/K2InformaticsGmbH/lager.git", {tag, "3.4.2"}}},
    {ranch, {git, "https://github.com/K2InformaticsGmbH/ranch.git", {tag, "1.3.2"}}},
    {sext, {git, "https://github.com/K2InformaticsGmbH/sext.git", {tag, "1.4.1"}}},
    {sqlparse, {git, "https://github.com/K2InformaticsGmbH/sqlparse.git", {branch, "master"}}},
    {aleppo, {git, "https://github.com/K2InformaticsGmbH/aleppo", {tag, "v0.9.3"}}}
]}.

{erl_first_files, ["src/imem_rec_pretty_pt.erl"]}.

{erl_opts, [{parse_transform, lager_transform}]}.

{eunit_compile_opts, [{d, 'USE_THOUSAND_SEP'}]}.
{eunit_opts, [
    {skip_deps, true},
    verbose
]}.

{profiles, [
    {test, [
        {plugins, [
            {coveralls, {git, "https://github.com/markusn/coveralls-erl", {branch, "master"}}}
        ]}
    ]}
]}.

{recursive_cmds, [clean, eunit]}.

{xref_checks, [
    deprecated_functions,
    deprecated_function_calls,
    exports_not_used,
    locals_not_used,
    undefined_functions,
    undefined_function_calls
]}.
